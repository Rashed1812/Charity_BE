Notification System API Documentation for Angular Frontend

1. Authentication
- All endpoints require JWT token in the Authorization header:
  Authorization: Bearer <your_token>

2. Get User Notifications
- Endpoint: GET /api/notification?onlyUnread=false
- Query Param: onlyUnread (optional, true/false)
- Response Example:
  [
    {
      "id": 1,
      "userId": "user123",
      "title": "تحديث حالة الشكوى",
      "message": "تم تغيير حالة الشكوى الخاصة بك إلى: Resolved",
      "isRead": false,
      "createdAt": "2024-07-09T14:00:00Z",
      "type": 1
    }
  ]

3. Mark Notification as Read
- Endpoint: POST /api/notification/mark-as-read/{id}
- Path Param: id (notification id)
- Response: { "success": true, "data": true, "message": "Notification marked as read" }

4. Send Notification (Admin Only)
- Endpoint: POST /api/notification/send?toEmail=user@email.com
- Body Example:
  {
    "userId": "user123",
    "title": "تنبيه هام",
    "message": "تمت الموافقة على طلبك.",
    "type": 0
  }
- Query Param: toEmail (optional, if provided, email will be sent)
- Response: { "success": true, "data": true, "message": "Notification sent successfully" }

5. Automatic Notifications
- When a new complaint is created: Admin receives notification & email.
- When complaint status changes: User receives notification & email.
- When a new consultation is created: Admin receives notification & email.

6. Notification Types
- 0: General
- 1: Complaint
- 2: Consultation
- 3: Appointment

7. Angular Usage Tips
- Use HttpClient with Authorization header for all requests.
- To show unread count: GET /api/notification?onlyUnread=true
- Mark as read when user clicks notification.
- Display title, message, createdAt in UI.

8. Example Angular Service (pseudo-code)

getNotifications(onlyUnread: boolean = false) {
  return this.http.get<Notification[]>(`/api/notification?onlyUnread=${onlyUnread}`);
}

markAsRead(id: number) {
  return this.http.post(`/api/notification/mark-as-read/${id}`, {});
}

sendNotification(notification, toEmail) {
  return this.http.post(`/api/notification/send?toEmail=${toEmail}`, notification);
}

For more details, contact backend team. 